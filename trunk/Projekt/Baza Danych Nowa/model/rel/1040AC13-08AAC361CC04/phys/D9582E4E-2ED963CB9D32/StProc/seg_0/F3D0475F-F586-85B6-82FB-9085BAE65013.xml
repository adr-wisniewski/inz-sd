<?xml version = '1.0' encoding = 'UTF-8'?>
<StoredProcedureOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.StoredProcedureOraclev10g" name="ADD_SIGNAL" id="F3D0475F-F586-85B6-82FB-9085BAE65013" directorySegmentName="seg_0">
   <createdBy>Adrian</createdBy>
   <createdTime>2011-08-06 09:10:25 UTC</createdTime>
   <changedBy>Adrian</changedBy>
   <changedTime>2011-08-06 10:46:23 UTC</changedTime>
   <ownerDesignName>model</ownerDesignName>
   <source>create or replace&amp;lt;br/&amp;gt;PROCEDURE ADD_SIGNAL &amp;lt;br/&amp;gt;(&amp;lt;br/&amp;gt;  type_code_v IN VARCHAR2  &amp;lt;br/&amp;gt;, employee_id_v IN NUMBER  &amp;lt;br/&amp;gt;, object_id_v IN NUMBER  &amp;lt;br/&amp;gt;) AS&amp;lt;br/&amp;gt;    object_code_v char;&amp;lt;br/&amp;gt;    view_name_v varchar2(30);&amp;lt;br/&amp;gt;    signal_id_v number;&amp;lt;br/&amp;gt;    ir incidents_v%rowtype;&amp;lt;br/&amp;gt;    pr problems_v%rowtype;&amp;lt;br/&amp;gt;BEGIN&amp;lt;br/&amp;gt;    select st.object_code, ot.view_name into object_code_v, view_name_v&amp;lt;br/&amp;gt;    from signal_types st join signal_object_types ot on ot.object_code = st.object_code&amp;lt;br/&amp;gt;    where st.type_code = type_code_v;&amp;lt;br/&amp;gt;    &amp;lt;br/&amp;gt;    insert into signals(SIGNAL_ID, CREATION_DATE,IS_SENT,EMPLOYEE_ID,TYPE_CODE,OBJECT_ID)&amp;lt;br/&amp;gt;    values(signal_id_seq.nextval + 10000000 , sysdate, &amp;apos;F&amp;apos;, employee_id_v, type_code_v, object_id_v)&amp;lt;br/&amp;gt;    returning signal_id&amp;lt;br/&amp;gt;    INTO signal_id_v;&amp;lt;br/&amp;gt;    &amp;lt;br/&amp;gt;&amp;lt;br/&amp;gt;    IF object_code_v = &amp;apos;I&amp;apos; THEN&amp;lt;br/&amp;gt;        select * into ir from incidents_v where incident_id = object_id_v;&amp;lt;br/&amp;gt;        &amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ISTA&amp;apos;, ir.STATUS);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IPRI&amp;apos;, ir.PRIORITY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IRSm&amp;apos;, ir.RESOLUTION_MONTH_NAME);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IRSd&amp;apos;, ir.RESOLUTION_DAY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IRSM&amp;apos;, ir.RESOLUTION_MONTH);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IRSY&amp;apos;, ir.RESOLUTION_YEAR);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IRSD&amp;apos;, ir.RESOLUTION_DATE);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ICLm&amp;apos;, ir.CLOSURE_MONTH_NAME);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ICLd&amp;apos;, ir.CLOSURE_DAY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ICLM&amp;apos;, ir.CLOSURE_MONTH);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ICLY&amp;apos;, ir.CLOSURE_YEAR);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ICLD&amp;apos;, ir.CLOSURE_DATE);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ICTE&amp;apos;, ir.CATEGORY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ICT3&amp;apos;, ir.SUB_SUB_CATEGORY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ICT2&amp;apos;, ir.SUB_CATEGORY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ICT1&amp;apos;, ir.MAIN_CATEGORY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IC8m&amp;apos;, ir.CREATION_MONTH_NAME);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IC8Q&amp;apos;, ir.CREATION_QUARTER);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IC8M&amp;apos;, ir.CREATION_MONTH);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IC8Y&amp;apos;, ir.CREATION_YEAR);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IC8d&amp;apos;, ir.CREATION_DAY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IC8D&amp;apos;, ir.CREATION_DATE);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ISUB&amp;apos;, ir.SUBJECT);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IID &amp;apos;, ir.INCIDENT_ID);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ISG &amp;apos;, ir.SUPPORT_GROUP);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ISM &amp;apos;, ir.STAFF_MEMBER);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ISRC&amp;apos;, ir.SOURCE);&amp;lt;br/&amp;gt;    &amp;lt;br/&amp;gt;    ELSIF object_code_v = &amp;apos;P&amp;apos; THEN&amp;lt;br/&amp;gt;        select * into pr from problems_v where problem_id = object_id_v;&amp;lt;br/&amp;gt;        &amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PSG &amp;apos;, pr.SUPPORT_GROUP);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PSM &amp;apos;, pr.STAFF_MEMBER);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PSTA&amp;apos;, pr.STATUS);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PPRI&amp;apos;, pr.PRIORITY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PCLm&amp;apos;, pr.CLOSURE_MONTH_NAME);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PCLd&amp;apos;, pr.CLOSURE_DAY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PCLM&amp;apos;, pr.CLOSURE_MONTH);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PCLY&amp;apos;, pr.CLOSURE_YEAR);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PCLD&amp;apos;, pr.CLOSURE_DATE);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PCT0&amp;apos;, pr.CATEGORY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PCT3&amp;apos;, pr.SUB_SUB_CATEGORY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PCT2&amp;apos;, pr.SUB_CATEGORY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PCT1&amp;apos;, pr.MAIN_CATEGORY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PC8m&amp;apos;, pr.CREATION_MONTH_NAME);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PC8d&amp;apos;, pr.CREATION_DAY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PC8M&amp;apos;, pr.CREATION_MONTH);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PC8Q&amp;apos;, pr.CREATION_QUARTER);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PC8Y&amp;apos;, pr.CREATION_YEAR);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PC8D&amp;apos;, pr.CREATION_DATE);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PSUB&amp;apos;, pr.SUBJECT);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PID &amp;apos;, pr.PROBLEM_ID);&amp;lt;br/&amp;gt;    END IF;&amp;lt;br/&amp;gt;/*&amp;lt;br/&amp;gt;&amp;lt;br/&amp;gt;select&amp;lt;br/&amp;gt;--ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE&amp;lt;br/&amp;gt;    &amp;apos;insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval,signal_id_v,&amp;apos;&amp;apos;&amp;apos; || soat.attribute_code || &amp;apos;&amp;apos;&amp;apos;, r.&amp;apos; || soat.attribute_name || &amp;apos;);&amp;apos;&amp;lt;br/&amp;gt;from&amp;lt;br/&amp;gt;    user_tab_cols utc&amp;lt;br/&amp;gt;    join signal_object_types sot on upper(utc.table_name) = upper(sot.view_name)&amp;lt;br/&amp;gt;    join signal_object_attribute_types soat on soat.object_code = sot.object_code and upper(soat.attribute_name) = upper(utc.column_name)&amp;lt;br/&amp;gt;where table_name = &amp;apos;INCIDENTS_V&amp;apos;&amp;lt;br/&amp;gt;&amp;lt;br/&amp;gt;*/&amp;lt;br/&amp;gt;&amp;lt;br/&amp;gt;END ADD_SIGNAL;</source>
   <body>create or replace&amp;lt;br/&amp;gt;PROCEDURE ADD_SIGNAL &amp;lt;br/&amp;gt;(&amp;lt;br/&amp;gt;  type_code_v IN VARCHAR2  &amp;lt;br/&amp;gt;, employee_id_v IN NUMBER  &amp;lt;br/&amp;gt;, object_id_v IN NUMBER  &amp;lt;br/&amp;gt;) AS&amp;lt;br/&amp;gt;    object_code_v char;&amp;lt;br/&amp;gt;    view_name_v varchar2(30);&amp;lt;br/&amp;gt;    signal_id_v number;&amp;lt;br/&amp;gt;    ir incidents_v%rowtype;&amp;lt;br/&amp;gt;    pr problems_v%rowtype;&amp;lt;br/&amp;gt;BEGIN&amp;lt;br/&amp;gt;    select st.object_code, ot.view_name into object_code_v, view_name_v&amp;lt;br/&amp;gt;    from signal_types st join signal_object_types ot on ot.object_code = st.object_code&amp;lt;br/&amp;gt;    where st.type_code = type_code_v;&amp;lt;br/&amp;gt;    &amp;lt;br/&amp;gt;    insert into signals(SIGNAL_ID, CREATION_DATE,IS_SENT,EMPLOYEE_ID,TYPE_CODE,OBJECT_ID)&amp;lt;br/&amp;gt;    values(signal_id_seq.nextval + 10000000 , sysdate, &amp;apos;F&amp;apos;, employee_id_v, type_code_v, object_id_v)&amp;lt;br/&amp;gt;    returning signal_id&amp;lt;br/&amp;gt;    INTO signal_id_v;&amp;lt;br/&amp;gt;    &amp;lt;br/&amp;gt;&amp;lt;br/&amp;gt;    IF object_code_v = &amp;apos;I&amp;apos; THEN&amp;lt;br/&amp;gt;        select * into ir from incidents_v where incident_id = object_id_v;&amp;lt;br/&amp;gt;        &amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ISTA&amp;apos;, ir.STATUS);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IPRI&amp;apos;, ir.PRIORITY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IRSm&amp;apos;, ir.RESOLUTION_MONTH_NAME);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IRSd&amp;apos;, ir.RESOLUTION_DAY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IRSM&amp;apos;, ir.RESOLUTION_MONTH);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IRSY&amp;apos;, ir.RESOLUTION_YEAR);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IRSD&amp;apos;, ir.RESOLUTION_DATE);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ICLm&amp;apos;, ir.CLOSURE_MONTH_NAME);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ICLd&amp;apos;, ir.CLOSURE_DAY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ICLM&amp;apos;, ir.CLOSURE_MONTH);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ICLY&amp;apos;, ir.CLOSURE_YEAR);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ICLD&amp;apos;, ir.CLOSURE_DATE);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ICTE&amp;apos;, ir.CATEGORY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ICT3&amp;apos;, ir.SUB_SUB_CATEGORY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ICT2&amp;apos;, ir.SUB_CATEGORY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ICT1&amp;apos;, ir.MAIN_CATEGORY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IC8m&amp;apos;, ir.CREATION_MONTH_NAME);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IC8Q&amp;apos;, ir.CREATION_QUARTER);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IC8M&amp;apos;, ir.CREATION_MONTH);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IC8Y&amp;apos;, ir.CREATION_YEAR);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IC8d&amp;apos;, ir.CREATION_DAY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IC8D&amp;apos;, ir.CREATION_DATE);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ISUB&amp;apos;, ir.SUBJECT);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;IID &amp;apos;, ir.INCIDENT_ID);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ISG &amp;apos;, ir.SUPPORT_GROUP);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ISM &amp;apos;, ir.STAFF_MEMBER);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;ISRC&amp;apos;, ir.SOURCE);&amp;lt;br/&amp;gt;    &amp;lt;br/&amp;gt;    ELSIF object_code_v = &amp;apos;P&amp;apos; THEN&amp;lt;br/&amp;gt;        select * into pr from problems_v where problem_id = object_id_v;&amp;lt;br/&amp;gt;        &amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PSG &amp;apos;, pr.SUPPORT_GROUP);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PSM &amp;apos;, pr.STAFF_MEMBER);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PSTA&amp;apos;, pr.STATUS);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PPRI&amp;apos;, pr.PRIORITY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PCLm&amp;apos;, pr.CLOSURE_MONTH_NAME);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PCLd&amp;apos;, pr.CLOSURE_DAY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PCLM&amp;apos;, pr.CLOSURE_MONTH);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PCLY&amp;apos;, pr.CLOSURE_YEAR);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PCLD&amp;apos;, pr.CLOSURE_DATE);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PCT0&amp;apos;, pr.CATEGORY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PCT3&amp;apos;, pr.SUB_SUB_CATEGORY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PCT2&amp;apos;, pr.SUB_CATEGORY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PCT1&amp;apos;, pr.MAIN_CATEGORY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PC8m&amp;apos;, pr.CREATION_MONTH_NAME);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PC8d&amp;apos;, pr.CREATION_DAY);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PC8M&amp;apos;, pr.CREATION_MONTH);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PC8Q&amp;apos;, pr.CREATION_QUARTER);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PC8Y&amp;apos;, pr.CREATION_YEAR);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PC8D&amp;apos;, pr.CREATION_DATE);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PSUB&amp;apos;, pr.SUBJECT);&amp;lt;br/&amp;gt;        insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval + 10000000,signal_id_v,&amp;apos;PID &amp;apos;, pr.PROBLEM_ID);&amp;lt;br/&amp;gt;    END IF;&amp;lt;br/&amp;gt;/*&amp;lt;br/&amp;gt;&amp;lt;br/&amp;gt;select&amp;lt;br/&amp;gt;--ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE&amp;lt;br/&amp;gt;    &amp;apos;insert into signal_attributes(ATTRIBUTE_ID,SIGNAL_ID,ATTRIBUTE_CODE,ATTRIBUTE_VALUE) values( SIGNAL_PARAM_ID_SEQ.nextval,signal_id_v,&amp;apos;&amp;apos;&amp;apos; || soat.attribute_code || &amp;apos;&amp;apos;&amp;apos;, r.&amp;apos; || soat.attribute_name || &amp;apos;);&amp;apos;&amp;lt;br/&amp;gt;from&amp;lt;br/&amp;gt;    user_tab_cols utc&amp;lt;br/&amp;gt;    join signal_object_types sot on upper(utc.table_name) = upper(sot.view_name)&amp;lt;br/&amp;gt;    join signal_object_attribute_types soat on soat.object_code = sot.object_code and upper(soat.attribute_name) = upper(utc.column_name)&amp;lt;br/&amp;gt;where table_name = &amp;apos;INCIDENTS_V&amp;apos;&amp;lt;br/&amp;gt;&amp;lt;br/&amp;gt;*/&amp;lt;br/&amp;gt;&amp;lt;br/&amp;gt;END ADD_SIGNAL;</body>
</StoredProcedureOraclev10g>