<?xml version = '1.0' encoding = 'UTF-8'?>
<TriggerOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.TriggerOraclev10g" name="INCIDENT_SIGNALS_TRG" id="65887B32-091F-1169-BE30-C962AB2C6F17" directorySegmentName="seg_0">
   <createdBy>Adrian</createdBy>
   <createdTime>2011-08-06 08:55:07 UTC</createdTime>
   <changedBy>Adrian</changedBy>
   <changedTime>2011-08-07 17:12:12 UTC</changedTime>
   <ownerDesignName>model</ownerDesignName>
   <actions>INSERT, UPDATE</actions>
   <body>BEGIN&amp;lt;br/&amp;gt;  IF :old.STATUS_CODE &amp;lt;&amp;gt; :new.STATUS_CODE THEN&amp;lt;br/&amp;gt;    --powiadomienie autora o zmianie statusu&amp;lt;br/&amp;gt;    insert into signals_tmp(type_code, employee_id, object_id) values(1, :new.AUTHOR, :new.INCIDENT_ID);&amp;lt;br/&amp;gt;  END IF;&amp;lt;br/&amp;gt;  &amp;lt;br/&amp;gt;  IF coalesce(:old.STAFF_MEMBER,-1) &amp;lt;&amp;gt; coalesce(:new.STAFF_MEMBER,-1) THEN&amp;lt;br/&amp;gt;    IF :old.STAFF_MEMBER is not NULL THEN&amp;lt;br/&amp;gt;       --powiadomienie serwisanta o odpisaniu incydentu&amp;lt;br/&amp;gt;       insert into signals_tmp(type_code, employee_id, object_id) values(11, :old.STAFF_MEMBER, :new.INCIDENT_ID);&amp;lt;br/&amp;gt;    END IF;&amp;lt;br/&amp;gt;    IF :new.STAFF_MEMBER is not NULL THEN&amp;lt;br/&amp;gt;        --powiadomienie serwisanta o przypisaniu incydentu&amp;lt;br/&amp;gt;       insert into signals_tmp(type_code, employee_id, object_id) values(10, :new.STAFF_MEMBER, :new.INCIDENT_ID);&amp;lt;br/&amp;gt;    END IF;&amp;lt;br/&amp;gt;  END IF;&amp;lt;br/&amp;gt;  &amp;lt;br/&amp;gt;  IF coalesce(:old.GROUP_ID,-1) &amp;lt;&amp;gt; coalesce(:new.GROUP_ID,-1) THEN&amp;lt;br/&amp;gt;    IF :old.GROUP_ID is not NULL THEN    &amp;lt;br/&amp;gt;       --powiadomienie menedzera grupy o odpisaniu incydentu&amp;lt;br/&amp;gt;       insert into signals_tmp(type_code, employee_id, object_id) values(13, (select manager_id from support_groups where group_id = :old.GROUP_ID), :new.INCIDENT_ID);&amp;lt;br/&amp;gt;    END IF;&amp;lt;br/&amp;gt;    IF :new.GROUP_ID is not NULL THEN&amp;lt;br/&amp;gt;        --powiadomienie menedzera grupy o przypisaniu incydentu&amp;lt;br/&amp;gt;       insert into signals_tmp(type_code, employee_id, object_id) values(12, (select manager_id from support_groups where group_id = :new.GROUP_ID), :new.INCIDENT_ID);&amp;lt;br/&amp;gt;    END IF;&amp;lt;br/&amp;gt;  END IF;&amp;lt;br/&amp;gt;  &amp;lt;br/&amp;gt;END;</body>
   <triggerTime>BEFORE</triggerTime>
   <table>A771E677-EC27-3720-3F0E-C600ABF45391</table>
</TriggerOraclev10g>